---
export interface Props {
  variant?: "default" | "compact";
}

const { variant = "default" } = Astro.props;
---

<div
  class={variant === "default"
    ? "newsletter-box my-8 rounded-lg border border-gray-200 dark:border-gray-700 bg-transparent p-6 sm:p-8"
    : "newsletter-compact mt-6"}
>
  {variant === "default" && (
    <p class="text-sm text-gray-900 dark:text-gray-100 mb-4">
      New posts, shipping stories, and nerdy links straight to your inbox.
    </p>
  )}

  <form
    action="https://buttondown.com/api/emails/embed-subscribe/astroza"
    method="post"
    target="_blank"
    class="embeddable-buttondown-form flex flex-col sm:flex-row gap-3"
  >
    <label for="bd-name" class="sr-only">Your Name</label>
    <input
      type="text"
      name="name"
      id="bd-name"
      placeholder="Your Name"
      class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-600 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"
    />
    <label for="bd-email" class="sr-only">Your Email</label>
    <input
      type="email"
      name="email"
      id="bd-email"
      placeholder="Your Email"
      required
      class="flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-600 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"
    />
    <button
      type="submit"
      class="px-6 py-2 rounded-md bg-[#0a6fbf] hover:bg-[#095fa6] transition-colors font-semibold whitespace-nowrap focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2"
      style="color: white;"
    >
      Subscribe
    </button>
  </form>

  {variant === "default" && (
    <p class="text-xs text-gray-900 dark:text-gray-100 mt-3">
      2Ã— per month, pure signal, zero fluff.
    </p>
  )}
</div>

<style>
  @media (max-width: 640px) {
    .newsletter-box {
      margin-left: -1rem;
      margin-right: -1rem;
      border-radius: 0;
    }
  }
</style>
